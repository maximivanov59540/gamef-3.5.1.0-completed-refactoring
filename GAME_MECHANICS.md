# üéÆ –ü–û–õ–ù–ê–Ø –¢–ê–ë–õ–ò–¶–ê –ò–ì–†–û–í–´–• –ú–ï–•–ê–ù–ò–ö - "–¢–æ—Ä–≥–æ–≤—ã–π –ü—É—Ç—å"

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-18
**–í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞:** 3.5.1.0
**–¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞:** Reverse-Engineering Analysis

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–°–∏—Å—Ç–µ–º–∞ –°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –∏ –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ó–¥–∞–Ω–∏—è–º–∏](#1-—Å–∏—Å—Ç–µ–º–∞-—Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞-–∏-—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è-–∑–¥–∞–Ω–∏—è–º–∏-construction)
2. [–°–∏—Å—Ç–µ–º–∞ –õ–æ–≥–∏—Å—Ç–∏–∫–∏ –∏ –î–æ—Ä–æ–≥](#2-—Å–∏—Å—Ç–µ–º–∞-–ª–æ–≥–∏—Å—Ç–∏–∫–∏-–∏-–¥–æ—Ä–æ–≥-logistics--roads)
3. [–°–∏—Å—Ç–µ–º–∞ –≠–∫–æ–Ω–æ–º–∏–∫–∏ –∏ –ù–∞—Å–µ–ª–µ–Ω–∏—è](#3-—Å–∏—Å—Ç–µ–º–∞-—ç–∫–æ–Ω–æ–º–∏–∫–∏-–∏-–Ω–∞—Å–µ–ª–µ–Ω–∏—è-economy)
4. [–°–∏—Å—Ç–µ–º–∞ –í–≤–æ–¥–∞ –∏ –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è](#4-—Å–∏—Å—Ç–µ–º–∞-–≤–≤–æ–¥–∞-–∏-—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è-input--control)
5. [–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ú–µ—Ö–∞–Ω–∏–∫–∏](#5-–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ-–º–µ—Ö–∞–Ω–∏–∫–∏-–æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ-–ø—Ä–∏-–∞–Ω–∞–ª–∏–∑–µ)
6. [–ö–ª—é—á–µ–≤—ã–µ –í—ã–≤–æ–¥—ã](#-–∫–ª—é—á–µ–≤—ã–µ-–≤—ã–≤–æ–¥—ã)

---

## 1. –°–ò–°–¢–ï–ú–ê –°–¢–†–û–ò–¢–ï–õ–¨–°–¢–í–ê –ò –£–ü–†–ê–í–õ–ï–ù–ò–Ø –ó–î–ê–ù–ò–Ø–ú–ò (Construction)

| –ú–µ—Ö–∞–Ω–∏–∫–∞ | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è (–ö–ª–∞—Å—Å—ã / –ü–∞—Ç—Ç–µ—Ä–Ω—ã) | –î–µ—Ç–∞–ª–∏ |
|----------|--------------------------------|--------|
| **–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π –¶–∏–∫–ª –ó–¥–∞–Ω–∏–π** | `BuildingManager.cs`, `BuildOrchestrator.cs` | **4 –æ—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ BuildOrchestrator:**<br><br>1. **–†–∞–∑–º–µ—â–µ–Ω–∏–µ** - –°–æ–∑–¥–∞–Ω–∏–µ ghost-–∑–¥–∞–Ω–∏—è (—Å–ª–æ–π "Ghost"), –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤/–∫–æ–ª–ª–∏–∑–∏–π, –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ —Å –≤—ã—á–µ—Ç–æ–º —Ä–µ—Å—É—Ä—Å–æ–≤<br><br>2. **–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ** - "–ü–æ–¥–Ω—è—Ç–∏–µ" –∑–¥–∞–Ω–∏—è –∏–∑ —Å–µ—Ç–∫–∏ (`PickUpBuilding`), pause –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞, –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ ghost, "–æ–ø—É—Å–∫–∞–Ω–∏–µ" –Ω–∞ –Ω–æ–≤–æ–µ –º–µ—Å—Ç–æ, resume –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞<br><br>3. **–£–¥–∞–ª–µ–Ω–∏–µ** - –í–æ–∑–≤—Ä–∞—Ç 50% —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ä–µ—Å—É—Ä—Å–æ–≤, —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ GridSystem, –æ—á–∏—Å—Ç–∫–∞ –º–æ–¥—É–ª–µ–π (–µ—Å–ª–∏ ModularBuilding), –æ—Ç–ø–∏—Å–∫–∞ –æ—Ç —Å–æ–±—ã—Ç–∏–π<br><br>4. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–µ–∂–∏–º–æ–≤** - `OnModeChanged()` –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –≥–æ–Ω–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π —á–µ—Ä–µ–∑ —Ñ–ª–∞–≥ `_isCancelling`, —É–º–Ω–∞—è –æ—Ç–º–µ–Ω–∞ (–æ—Ç–º–µ–Ω—è–µ—Ç –≤—Å—ë –ö–†–û–ú–ï –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞) |
| **–ú–æ–¥—É–ª—å–Ω—ã–µ –ó–¥–∞–Ω–∏—è** | `ModularBuilding.cs`, `BuildingModule.cs` | **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π:**<br>- `RegisterModule()` –¥–æ–±–∞–≤–ª—è–µ—Ç –º–æ–¥—É–ª—å –≤ HashSet (O(1) –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–º–µ—Å—Ç–æ List)<br>- –í—ã–∑—ã–≤–∞–µ—Ç `attachedProducer?.UpdateProductionRate(count, max)` –¥–ª—è –ø–µ—Ä–µ—Å—á–µ—Ç–∞ –±–æ–Ω—É—Å–∞<br>- –ë–æ–Ω—É—Å = `current/max` (–Ω–∞–ø—Ä–∏–º–µ—Ä, 3/4 –º–æ–¥—É–ª–µ–π = 75% —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)<br>- `UnregisterModule()` –ø—Ä–∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–∏ –º–æ–¥—É–ª—è –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å<br><br>**–ú–æ–¥—É–ª–∏:**<br>- –ò–º–µ—é—Ç `parentBuilding` —Å—Å—ã–ª–∫—É, `gridPosition`, `size`<br>- –ü—Ä–∏ OnDestroy –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è |
| **–ó–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –û–±–ª–∞—Å—Ç–∏** | `ZonedArea.cs`, `BuildSlot.cs` | **–°–ª–æ—Ç—ã (BuildSlot) –≤ –∑–æ–Ω–∞—Ö:**<br>- –ö–∞–∂–¥—ã–π —Å–ª–æ—Ç –∏–º–µ–µ—Ç `localPosition` (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∑–æ–Ω—ã), `size`, `allowedBuildings[]`<br>- `occupiedBy` - —Å—Å—ã–ª–∫–∞ –Ω–∞ BuildingIdentity –∑–∞–Ω–∏–º–∞—é—â–µ–≥–æ –∑–¥–∞–Ω–∏—è<br><br>**–ü–æ–¥—Å–≤–µ—Ç–∫–∞:**<br>- `ShowSlotHighlights(BuildingData)` —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Å–ª–æ—Ç—ã –ø–æ —Ä–∞–∑–º–µ—Ä—É –∏ —Ç–∏–ø—É –∑–¥–∞–Ω–∏—è<br>- –í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ `Start()` –∏–∑ `slotVisualPrefab`<br>- –£—á–∏—Ç—ã–≤–∞–µ—Ç `pivotOrigin` (Center/BottomLeft) –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è<br>- `EnsureVisuals()` –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç –≤–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞ —Å–ª–æ—Ç–æ–≤ –≤ Inspector |
| **–ì—Ä—É–ø–ø–æ–≤—ã–µ –û–ø–µ—Ä–∞—Ü–∏–∏** | `GroupOperationHandler.cs`, `GroupMath.cs` | **"–ü–æ–¥–Ω—è—Ç–∏–µ" –≥—Ä—É–ø–ø—ã (StartMassMove):**<br>1. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç anchor (–ª–µ–≤—ã–π –Ω–∏–∂–Ω–∏–π —É–≥–æ–ª –ø–æ min(x+y))<br>2. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç offsets –≤—Å–µ—Ö –∑–¥–∞–Ω–∏–π –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ anchor<br>3. –°–æ–±–∏—Ä–∞–µ—Ç –¥–æ—Ä–æ–≥–∏ –ø–æ–¥ –∑–¥–∞–Ω–∏—è–º–∏ (`CollectRoadsUnderBuildings`)<br>4. **–ö–†–ò–¢–ò–ß–ù–û:** –í—ã–∑—ã–≤–∞–µ—Ç `GridSystem.PickUpBuilding()` - –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç —è—á–µ–π–∫–∏ —Å–µ—Ç–∫–∏<br>5. –£–¥–∞–ª—è–µ—Ç –¥–æ—Ä–æ–≥–∏ —á–µ—Ä–µ–∑ `_roadManager.RemoveRoad()`<br>6. –ü–µ—Ä–µ–≤–æ–¥–∏—Ç –∑–¥–∞–Ω–∏—è –≤ Ghost-–≤–∏–∑—É–∞–ª, —Å—Ç–∞–≤–∏—Ç –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –Ω–∞ –ø–∞—É–∑—É<br><br>**"–û–ø—É—Å–∫–∞–Ω–∏–µ" –≥—Ä—É–ø–ø—ã (PlaceGroupMove):**<br>1. –†–∞–∑–º–µ—â–∞–µ—Ç –¥–æ—Ä–æ–≥–∏ –Ω–∞ –Ω–æ–≤—ã—Ö –ø–æ–∑–∏—Ü–∏—è—Ö<br>2. –í—ã–∑—ã–≤–∞–µ—Ç `GridSystem.OccupyCells()` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–¥–∞–Ω–∏—è<br>3. –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Real/Blueprint –≤–∏–∑—É–∞–ª<br>4. –°–Ω–∏–º–∞–µ—Ç –ø–∞—É–∑—É –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ (–µ—Å–ª–∏ –Ω–µ blueprint)<br><br>**–û—Ç–º–µ–Ω–∞ (QuietCancel):**<br>- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–æ—Ä–æ–≥–∏ –Ω–∞ –∏—Å—Ö–æ–¥–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏<br>- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–¥–∞–Ω–∏—è –≤ –∏—Å—Ö–æ–¥–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã<br>- –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä —Å —É—á–µ—Ç–æ–º rotation<br><br>**–ü—É–ª –ø—Ä–∏–∑—Ä–∞–∫–æ–≤:**<br>- –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GameObject –¥–ª—è preview (–∏–∑–±–µ–≥–∞–µ—Ç GC)<br>- –£–º–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–∑–∏–∫–∏: –æ—Ç–∫–ª—é—á–∞–µ—Ç concave colliders, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –¥–µ–ª–∞–µ—Ç trigger |
| **–ê–ø–≥—Ä–µ–π–¥ –ó–¥–∞–Ω–∏–π** | `State_BuildingUpgrade.cs` | **–°–æ—Ö—Ä–∞–Ω—è–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∞–ø–≥—Ä–µ–π–¥–µ:**<br>1. **–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å Input:** Dictionary<ResourceType, float> –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤<br>2. **–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å Output:** —Ç–∏–ø —Ä–µ—Å—É—Ä—Å–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, capacity<br>3. **–ü—Ä–æ–≥—Ä–µ—Å—Å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:** `_cycleTimer / cycleTime` (0.0-1.0)<br>4. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–∞–∑–≥–æ–Ω–∞:** `_rampUpEfficiency` (smooth start)<br>5. **–ü–æ–∑–∏—Ü–∏–∏ –º–æ–¥—É–ª–µ–π:** List<Vector2Int> –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)<br><br>**–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–≤—ã–π tier:**<br>- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Reflection –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ private –ø–æ–ª—è–º `_cycleTimer`, `_rampUpEfficiency`<br>- –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç `currentTier` –Ω–∞ +1<br>- –ü–µ—Ä–µ–Ω–æ—Å–∏—Ç –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –Ω–∞ –Ω–æ–≤–æ–µ –∑–¥–∞–Ω–∏–µ<br>- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å: `newCycleTime * savedProgress`<br><br>**–ë–ê–õ–ê–ù–°:** –ú–æ–¥—É–ª–∏ –ù–ï –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–∏–≥—Ä–æ–∫ –¥–æ–ª–∂–µ–Ω –∑–∞–Ω–æ–≤–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å) |
| **–í–∏–∑—É–∞–ª—å–Ω—ã–µ –°–æ—Å—Ç–æ—è–Ω–∏—è** | `BuildingVisuals.cs` | **4 —Å–æ—Å—Ç–æ—è–Ω–∏—è:**<br>1. **Ghost (Green)** - Valid placement, _ghostMaterial<br>2. **Invalid (Red)** - Cannot place, _invalidMaterial<br>3. **Blueprint (Blue)** - Planned, _blueprintMaterial + –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å<br>4. **Real** - –û–±—ã—á–Ω–æ–µ –∑–¥–∞–Ω–∏–µ, originalMaterials<br><br>–°–º–µ–Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ —á–µ—Ä–µ–∑ GetComponentsInChildren<Renderer>() |
| **–†–æ—Ç–∞—Ü–∏—è** | `BuildingManager.cs`, `GroupMath.cs` | **–ü–æ–≤–æ—Ä–æ—Ç –Ω–∞ 90¬∞:**<br>- –°–≤–∞–ø–∞–µ—Ç —Ä–∞–∑–º–µ—Ä: (3x2) ‚Üí 90¬∞ ‚Üí (2x3)<br>- `GroupMath.RotateVector()` –¥–ª—è offset–æ–≤ –≤ –≥—Ä—É–ø–ø–∞—Ö<br>- –§–æ—Ä–º—É–ª–∞: if(rot==90¬∞ \|\| rot==270¬∞) swap(x,y)<br>- –£—á–∏—Ç—ã–≤–∞–µ—Ç —Ü–µ–Ω—Ç—Ä –∑–¥–∞–Ω–∏—è –ø—Ä–∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ |
| **Blueprint Mode** | `BuildingManager.cs`, `State_Upgrading.cs` | **–†–µ–∂–∏–º –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:**<br>- –ù–ï —Ç—Ä–∞—Ç–∏—Ç —Ä–µ—Å—É—Ä—Å—ã –ø—Ä–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏<br>- –í–∏–∑—É–∞–ª: —Å–∏–Ω–∏–π/–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª<br>- –ó–¥–∞–Ω–∏–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ (–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ)<br>- –ê–ø–≥—Ä–µ–π–¥ –≤ Real: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–µ—Å—É—Ä—Å—ã ‚Üí —Ç—Ä–∞—Ç–∏—Ç ‚Üí –º–µ–Ω—è–µ—Ç –≤–∏–∑—É–∞–ª ‚Üí –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ |

---

## 2. –°–ò–°–¢–ï–ú–ê –õ–û–ì–ò–°–¢–ò–ö–ò –ò –î–û–†–û–ì (Logistics & Roads)

| –ú–µ—Ö–∞–Ω–∏–∫–∞ | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è (–ö–ª–∞—Å—Å—ã / –ü–∞—Ç—Ç–µ—Ä–Ω—ã) | –î–µ—Ç–∞–ª–∏ |
|----------|--------------------------------|--------|
| **Road-Based Aura** | `AuraManager.cs`, `RoadCoverageVisualizer.cs`, `CoverageCalculator.cs` | **–ò—Å—Ç–æ—á–Ω–∏–∫ –∞—É—Ä—ã:**<br>- `AuraEmitter` —Å —Ç–∏–ø–æ–º `AuraDistributionType.RoadBased`<br>- –ù–∞—Ö–æ–¥–∏—Ç –±–ª–∏–∂–∞–π—à—É—é –¥–æ—Ä–æ–≥—É –∫ –∑–¥–∞–Ω–∏—é —á–µ—Ä–µ–∑ `FindAllRoadAccess()`<br><br>**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–∫—Ä—ã—Ç–∏–µ:**<br>1. `CoverageCalculator.CalculateCoverage()` –∑–∞–ø—É—Å–∫–∞–µ—Ç BFS –æ—Ç —Ç–æ—á–µ–∫ –¥–æ—Å—Ç—É–ø–∞ —ç–º–∏—Ç—Ç–µ—Ä–∞<br>2. –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ road graph –≤ —Ä–∞–¥–∏—É—Å–µ `emitter.radius`<br>3. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Dictionary<RoadTile, float>` –≥–¥–µ float = —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (1.0 –≤ —Ü–µ–Ω—Ç—Ä–µ, 0.0 –Ω–∞ –∫—Ä–∞—é)<br>4. `RoadCoverageVisualizer` –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Ü–≤–µ—Ç–∞: `Lerp(StrongBlue, LightBlue, 1-eff¬≤)`<br><br>**–†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:**<br>- –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è `_roadManager.OnRoadAdded/OnRoadRemoved`<br>- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–ª–∞–≥ `_dirty = true`, –ø–µ—Ä–µ—Å—á–µ—Ç –≤ Update() |
| **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –õ–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –£–∑–ª–æ–≤** | `IResourceProvider.cs`, `IResourceReceiver.cs` | **IResourceProvider (–ò—Å—Ç–æ—á–Ω–∏–∫ —Ä–µ—Å—É—Ä—Å–æ–≤):**<br>- `GetGridPosition()` - –ø–æ–∑–∏—Ü–∏—è –≤ —Å–µ—Ç–∫–µ –¥–ª—è pathfinding<br>- `GetProvidedResourceType()` - —Ç–∏–ø —Ä–µ—Å—É—Ä—Å–∞<br>- `GetAvailableAmount()` - –¥–æ—Å—Ç—É–ø–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ<br>- `TryTakeResource()` - –∑–∞–±—Ä–∞—Ç—å —Ä–µ—Å—É—Ä—Å (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ –∫–æ–ª-–≤–æ)<br>- `CanAcceptCart()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—á–µ—Ä–µ–¥–∏ —Å–∫–ª–∞–¥–∞<br><br>**IResourceReceiver (–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å):**<br>- `GetGridPosition()`<br>- `AcceptsResource(type)` - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª–∏ —ç—Ç–æ—Ç —Ç–∏–ø<br>- `GetAvailableSpace()` - —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ<br>- `TryAddResource()` - –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ—Å—É—Ä—Å<br>- `CanAcceptCart()`<br><br>**–†–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**<br>- Warehouse: implements BOTH (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —É–∑–µ–ª)<br>- BuildingOutputInventory: implements IResourceProvider<br>- BuildingInputInventory: implements IResourceReceiver |
| **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è Supply Chain** | `ResourceCoordinator.cs` | **–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–µ —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ:**<br>- `RegisterSupplyRoute(producer, consumer, resourceType)` —Å–æ–∑–¥–∞–µ—Ç —Å–≤—è–∑—å<br>- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `Dictionary<consumer, SupplyRoute>`<br>- `IsConsumerReserved()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –∑–∞–Ω—è—Ç –ª–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –î–†–£–ì–ò–ú –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–º<br><br>**–£—Å–ª–æ–≤–∏—è –≤–∫–ª—é—á–µ–Ω–∏—è (`ShouldUseExclusiveReservation`):**<br>1. –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π –∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π —Ä–µ—Å—É—Ä—Å–∞ –≤ road network<br>2. **–ï—Å–ª–∏ producers >= consumers:** –∂–µ—Å—Ç–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ 1:1<br>   - –ü—Ä–∏–º–µ—Ä: 2 —Ä—É–¥–Ω–∏–∫–∞, 2 –∫—É–∑–Ω–∏—Ü—ã ‚Üí –∫–∞–∂–¥—ã–π —Ä—É–¥–Ω–∏–∫ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω –∑–∞ —Å–≤–æ–µ–π –∫—É–∑–Ω–∏—Ü–µ–π<br>3. **–ï—Å–ª–∏ producers < consumers:** –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∞<br>   - –ü—Ä–∏–º–µ—Ä: 1 —Ä—É–¥–Ω–∏–∫, 2 –∫—É–∑–Ω–∏—Ü—ã ‚Üí —Ä—É–¥–Ω–∏–∫ —Å–Ω–∞–±–∂–∞–µ—Ç –æ–±–µ<br><br>**–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Ä–æ–∂–Ω–æ–π —Å–µ—Ç–∏:**<br>- `AreInSameRoadNetwork()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç BFS –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–≤—è–∑–Ω–æ—Å—Ç–∏<br>- –†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤—É–µ—Ç –¢–û–õ–¨–ö–û –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ road island<br><br>**–û—á–∏—Å—Ç–∫–∞:**<br>- Timeout 30 —Å–µ–∫—É–Ω–¥ –¥–ª—è —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —Å–≤—è–∑–µ–π<br>- –ü—Ä–æ–≤–µ—Ä–∫–∞ Unity fake null (–∫–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç —É–Ω–∏—á—Ç–æ–∂–µ–Ω –Ω–æ —Å—Å—ã–ª–∫–∞ != null) |
| **–ü–æ–∏—Å–∫ –ü—É—Ç–∏ (Pathfinding)** | `CartPathfinder.cs`, `LogisticsPathfinder.cs` | **–ê–ª–≥–æ—Ä–∏—Ç–º: Multi-Start/Multi-End BFS**<br><br>1. `FindAllRoadAccess(buildingPos)` –Ω–∞—Ö–æ–¥–∏—Ç –í–°–ï —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ –Ω–∞ –¥–æ—Ä–æ–≥—É (—Å–æ—Å–µ–¥–Ω–∏–µ –∫–ª–µ—Ç–∫–∏)<br>2. `Distances_BFS_Multi(startNodes[], maxDist, graph)` - flood fill –æ—Ç –ú–ù–û–ñ–ï–°–¢–í–ê —Å—Ç–∞—Ä—Ç–æ–≤—ã—Ö —Ç–æ—á–µ–∫<br>3. –ù–∞—Ö–æ–¥–∏—Ç –±–ª–∏–∂–∞–π—à–∏–π –∫–æ–Ω–µ—Ü –∏–∑ –ú–ù–û–ñ–ï–°–¢–í–ê –∫–æ–Ω–µ—á–Ω—ã—Ö —Ç–æ—á–µ–∫ (min distance)<br>4. `FindActualPath()` –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—É—Ç—å –ø–æ parent-—É–∫–∞–∑–∞—Ç–µ–ª—è–º<br><br>**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**<br>- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è HashSet –¥–ª—è visited (O(1) –ø—Ä–æ–≤–µ—Ä–∫–∞)<br>- Queue –¥–ª—è BFS frontier<br>- Limit –Ω–∞ maxDistance –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞–≤–∏—Å–∞–Ω–∏–π<br><br>**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**<br>- `List<Vector2Int>` —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –ø—É—Ç–∏<br>- `null` –µ—Å–ª–∏ –ø—É—Ç—å –Ω–µ –Ω–∞–π–¥–µ–Ω |
| **–î–æ—Ä–æ–∂–Ω–∞—è –°–µ—Ç—å** | `RoadManager.cs`, `RoadTile.cs` | **Road Graph:**<br>- `Dictionary<Vector2Int, RoadTile>` - –≥—Ä–∞—Ñ –¥–æ—Ä–æ–∂–Ω–æ–π —Å–µ—Ç–∏<br>- –°–æ–±—ã—Ç–∏—è `OnRoadAdded`, `OnRoadRemoved` –¥–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–∏—Å—Ç–µ–º<br><br>**RoadTile:**<br>- –°—Å—ã–ª–∫–∞ –Ω–∞ `RoadData` (—Ç–∏–ø –¥–æ—Ä–æ–≥–∏, speed multiplier)<br>- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ BFS pathfinding<br><br>**–ê–ø–≥—Ä–µ–π–¥:**<br>- –ó–∞–º–µ–Ω–∞ –¥–æ—Ä–æ–∂–Ω–æ–≥–æ —Ç–∞–π–ª–∞ (–ø–µ—Å–æ–∫ ‚Üí –∫–∞–º–µ–Ω—å)<br>- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç connectivity –≥—Ä–∞—Ñ–∞ |

---

## 3. –°–ò–°–¢–ï–ú–ê –≠–ö–û–ù–û–ú–ò–ö–ò –ò –ù–ê–°–ï–õ–ï–ù–ò–Ø (Economy)

| –ú–µ—Ö–∞–Ω–∏–∫–∞ | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è (–ö–ª–∞—Å—Å—ã / –ü–∞—Ç—Ç–µ—Ä–Ω—ã) | –î–µ—Ç–∞–ª–∏ |
|----------|--------------------------------|--------|
| **–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –∏ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** | `ResourceProducer.cs` | **FinalEfficiency = Ramp-Up √ó Workforce √ó Efficiency √ó ModuleBonus**<br><br>**1. Ramp-Up/Ramp-Down (—Ä–∞–∑–≥–æ–Ω/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞):**<br>- `_rampUpEfficiency` –ø–ª–∞–≤–Ω–æ –¥–≤–∏–∂–µ—Ç—Å—è –∫ —Ü–µ–ª–µ–≤–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é (0.0 ‚Üí 1.0)<br>- –°–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–∑–≥–æ–Ω–∞: `Time.deltaTime / rampUpTimeSeconds` (–Ω–∞–ø—Ä–∏–º–µ—Ä, 60 —Å–µ–∫—É–Ω–¥)<br>- –°–∫–æ—Ä–æ—Å—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–∫–∏: `Time.deltaTime / rampDownTimeSeconds`<br>- **–¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:** 1.0 –µ—Å–ª–∏ –µ—Å—Ç—å –≤—Ö–æ–¥–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã –ò –¥–æ—Å—Ç—É–ø –∫ —Å–∫–ª–∞–¥—É, –∏–Ω–∞—á–µ 0.0<br>- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Mathf.MoveTowards()` –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏<br><br>**2. Workforce (—Ä–∞–±–æ—á–∞—è —Å–∏–ª–∞):**<br>- `_currentWorkforceCap` = –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–±–æ—Ç–Ω–∏–∫–∏ / —Ç—Ä–µ–±—É–µ–º—ã–µ<br>- –ü–æ–ª—É—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `_resourceManager.Population.GetWorkforceRatio(tier)`<br>- –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç ‚Üí –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 50% —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤ = 50% —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)<br><br>**3. Efficiency Modifier:**<br>- `_efficiencyModifier` - –≤–Ω–µ—à–Ω–∏–π –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä (—Å–æ–±—ã—Ç–∏—è, –±–æ–Ω—É—Å—ã)<br>- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `SetEfficiency()`<br><br>**4. Module Bonus:**<br>- `_currentModuleBonus` = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–¥—É–ª–µ–π / –º–∞–∫—Å–∏–º—É–º<br>- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `UpdateProductionRate(current, max)`<br><br>**–õ–æ–≥–∏–∫–∞ —Ü–∏–∫–ª–∞:**<br>```<br>adjustedCycleTime = baseCycleTime / FinalEfficiency<br>_cycleTimer += Time.deltaTime<br>if (_cycleTimer >= adjustedCycleTime):<br>    Produce() // Consume inputs, Add outputs<br>``` |
| **–ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞** | `ModularBuilding.cs` ‚Üí `ResourceProducer.cs` | **–°–≤—è–∑—å ModularBuilding ‚Üí ResourceProducer:**<br><br>1. `ModularBuilding` –∏–º–µ–µ—Ç `attachedProducer` (—Å—Å—ã–ª–∫–∞ –Ω–∞ ResourceProducer)<br>2. –ü—Ä–∏ `RegisterModule()` –∏–ª–∏ `UnregisterModule()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è:<br>   ```csharp<br>   attachedProducer?.UpdateProductionRate(GetModuleCount(), maxModuleCount)<br>   ```<br>3. `ResourceProducer.UpdateProductionRate()` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `_currentModuleBonus = current/max`<br>4. –ë–æ–Ω—É—Å –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ `GetFinalEfficiency()`: `rampUp √ó workforce √ó efficiency √ó moduleBonus`<br><br>**–ü—Ä–∏–º–µ—Ä:**<br>- –§–µ—Ä–º–∞ —Å 3 –ø–æ–ª—è–º–∏ –∏–∑ max 4: `_currentModuleBonus = 3/4 = 0.75` (75% —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)<br>- –ë–µ–∑ –º–æ–¥—É–ª–µ–π: `0/4 = 0` (0% —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ)<br>- –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä: `4/4 = 1.0` (100% —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏) |
| **–ù–∞—Å–µ–ª–µ–Ω–∏–µ** | `PopulationData.cs` | **–ö–∞–∫ –∂–∏–ª—å–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞–±–æ—á—É—é —Å–∏–ª—É:**<br><br>1. `AddHousingCapacity(tier, amount)` —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç `_maxPopulation[tier]`<br>2. –í—ã–∑—ã–≤–∞–µ—Ç `UpdateWorkforce()` –∫–æ—Ç–æ—Ä—ã–π –∫–æ–ø–∏—Ä—É–µ—Ç:<br>   ```csharp<br>   _totalAvailableWorkforce[tier] = _maxPopulation[tier]<br>   ```<br>3. –õ–æ–≥–∏–∫–∞: **1 –∂–∏–ª–æ–µ –º–µ—Å—Ç–æ = 1 –¥–æ—Å—Ç—É–ø–Ω—ã–π —Ä–∞–±–æ—Ç–Ω–∏–∫**<br>4. –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è (`RegisterProducer()`):<br>   ```csharp<br>   _totalRequiredWorkforce[tier] += producer.workforceRequired<br>   ```<br>5. `GetWorkforceRatio(tier)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:<br>   ```csharp<br>   available / required // Clamp01<br>   ```<br><br>**–°–æ–±—ã—Ç–∏—è:**<br>- `OnPopulationChanged(tier)` - –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞<br>- `OnAnyPopulationChanged()` - –¥–ª—è –æ–±—â–µ–≥–æ UI<br><br>**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**<br>- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ `Enum.GetValues(typeof(PopulationTier))` –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∞–ª–ª–æ–∫–∞—Ü–∏–π |
| **–í–ª–∏—è–Ω–∏–µ –ü–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π** | `Need.cs`, `Residence.cs` | **–ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —Å–æ–±—ã—Ç–∏–π:**<br><br>1. **pandemicChanceReduction** (0-1):<br>   - –°–Ω–∏–∂–∞–µ—Ç —à–∞–Ω—Å –ø–∞–Ω–¥–µ–º–∏–∏ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç<br>   - –ü—Ä–∏–º–µ—Ä: 0.2 = —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞ 20%<br>   - –†–∞–±–æ—Ç–∞–µ—Ç –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –£–î–û–í–õ–ï–¢–í–û–†–ï–ù–ê<br><br>2. **riotChanceReduction** (0-1):<br>   - –°–Ω–∏–∂–∞–µ—Ç —à–∞–Ω—Å –±—É–Ω—Ç–∞<br>   - –ü—Ä–∏–º–µ—Ä: 0.15 = —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞ 15%<br><br>**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**<br>- Residence –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç —Ä–µ—Å—É—Ä—Å—ã —á–µ—Ä–µ–∑ Need.amountPerMinute<br>- –ï—Å–ª–∏ —Ä–µ—Å—É—Ä—Å –µ—Å—Ç—å ‚Üí –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è bonus (population, happiness, tax, eventReduction)<br>- –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è penalty (happiness)<br><br>**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π:**<br>- `Basic` (–µ–¥–∞, –≤–æ–¥–∞) - –∫—Ä–∏—Ç–∏—á–Ω—ã–µ<br>- `Comfort` (–æ–¥–µ–∂–¥–∞) - –≤–∞–∂–Ω—ã–µ<br>- `Personal` (—Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è) - –ø–æ–ª–µ–∑–Ω—ã–µ<br>- `Luxury` (–¥–µ–ª–∏–∫–∞—Ç–µ—Å—ã) - –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ<br><br>**–°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (Anno 1800):**<br>- `requiresUnlock = true` ‚Üí Need –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ `unlockAtPopulation`<br>- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `IsUnlocked()` ‚Üí —á–∏—Ç–∞–µ—Ç `ResourceManager.Instance.Population.GetCurrentPopulation(tier)` |

---

## 4. –°–ò–°–¢–ï–ú–ê –í–í–û–î–ê –ò –£–ü–†–ê–í–õ–ï–ù–ò–Ø (Input & Control)

| –ú–µ—Ö–∞–Ω–∏–∫–∞ | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è (–ö–ª–∞—Å—Å—ã / –ü–∞—Ç—Ç–µ—Ä–Ω—ã) | –î–µ—Ç–∞–ª–∏ |
|----------|--------------------------------|--------|
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –í–≤–æ–¥–æ–º** | `PlayerInputController.cs`, `IInputState.cs` | **–ü–∞—Ç—Ç–µ—Ä–Ω:** State Machine Pattern<br><br>**–í—Å–µ–≥–æ 11 —Ä–µ–∂–∏–º–æ–≤ –≤–≤–æ–¥–∞ (InputMode enum):**<br>1. **None** - Idle, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–µ—Ä–æ–π<br>2. **Building** - –†–∞–∑–º–µ—â–µ–Ω–∏–µ –∑–¥–∞–Ω–∏–π —Å ghost preview<br>3. **Moving** - –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –∑–¥–∞–Ω–∏—è<br>4. **Deleting** - –£–¥–∞–ª–µ–Ω–∏–µ –∑–¥–∞–Ω–∏–π<br>5. **Upgrading** - –ê–ø–≥—Ä–µ–π–¥ –∑–¥–∞–Ω–∏—è –Ω–∞ –Ω–æ–≤—ã–π tier<br>6. **Copying** - –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–¥–∞–Ω–∏—è<br>7. **Selecting** - Box selection (drag to select)<br>8. **GroupCopying** - –ú–∞—Å—Å–æ–≤–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–¥–µ–ª–µ–Ω–∏—è<br>9. **GroupMoving** - –ú–∞—Å—Å–æ–≤–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –≤—ã–¥–µ–ª–µ–Ω–∏—è<br>10. **RoadBuilding** - –°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ –¥–æ—Ä–æ–≥<br>11. **PlacingModule** - –†–∞–∑–º–µ—â–µ–Ω–∏–µ –º–æ–¥—É–ª—è (–ø–æ–ª–µ –Ω–∞ —Ñ–µ—Ä–º–µ)<br><br>**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å IInputState:**<br>```csharp<br>void OnEnter(); // Setup (—Å–æ–∑–¥–∞—Ç—å ghost, –ø–æ–∫–∞–∑–∞—Ç—å UI)<br>void OnUpdate(); // Per-frame (–æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é ghost)<br>void OnExit(); // Cleanup (—É–¥–∞–ª–∏—Ç—å ghost, —Å–∫—Ä—ã—Ç—å UI)<br>```<br><br>**–°–º–µ–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π:**<br>```csharp<br>SetMode(InputMode newMode):<br>  _currentState?.OnExit()<br>  _currentState = _states[newMode]<br>  CurrentInputMode = newMode<br>  _currentState.OnEnter()<br>  BuildOrchestrator.Instance?.OnModeChanged(newMode)<br>```<br><br>**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ Service Locator:**<br>- `_resourceManager = ServiceLocator.Get<IResourceManager>()`<br>- `_roadManager = ServiceLocator.Get<IRoadManager>()`<br>- `_moneyManager = ServiceLocator.Get<IMoneyManager>()` |
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ–º** | `BuildOrchestrator.cs` | **–ö–∞–∫ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç—Å—è –≥–æ–Ω–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π:**<br><br>**1. –§–ª–∞–≥ `_isCancelling`:**<br>```csharp<br>if (_isCancelling) return; // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∫—É—Ä—Å–∏—é<br>_isCancelling = true;<br>// ... –æ—Ç–º–µ–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–π ...<br>_isCancelling = false;<br>```<br><br>**2. –£–º–Ω–∞—è –æ—Ç–º–µ–Ω–∞ (OnModeChanged):**<br>- –û—Ç–º–µ–Ω—è–µ—Ç –í–°–ï —Ä–µ–∂–∏–º—ã –ö–†–û–ú–ï —Ç–æ–≥–æ, –≤–æ –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ—Ö–æ–¥–∏–º<br>- –ü—Ä–∏–º–µ—Ä: –ø–µ—Ä–µ—Ö–æ–¥ –≤ GroupMoving ‚Üí –ù–ï –æ—Ç–º–µ–Ω—è–µ—Ç GroupMoving, –Ω–æ –æ—Ç–º–µ–Ω—è–µ—Ç Building/Copying/etc<br><br>```csharp<br>if (newMode != InputMode.Building && newMode != InputMode.Moving)<br>    _buildingManager?.CancelAllModes();<br>    <br>if (newMode != InputMode.GroupMoving && newMode != InputMode.GroupCopying)<br>    _groupOps?.CancelGroupOperation();<br>```<br><br>**3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å PlayerInputController:**<br>- `PlayerInputController.SetMode()` –≤—ã–∑—ã–≤–∞–µ—Ç `BuildOrchestrator.OnModeChanged()`<br>- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —á—Ç–æ –æ—Ç–º–µ–Ω–∞ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –î–û OnEnter –Ω–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è<br><br>**4. CancelAll() –¥–ª—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤:**<br>- –û—Ç–º–µ–Ω—è–µ—Ç –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ä–∞–∑–æ–º<br>- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö –∏–ª–∏ –ø–æ –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (ESC)<br><br>**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ç–∫–æ–π:**<br>- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç grid –¥–ª—è Building/Moving/Deleting/Upgrading/Copying/GroupOps/RoadBuilding<br>- –°–∫—Ä—ã–≤–∞–µ—Ç –¥–ª—è None |

---

## 5. –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ú–ï–•–ê–ù–ò–ö–ò (–û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ)

| –ú–µ—Ö–∞–Ω–∏–∫–∞ | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è | –î–µ—Ç–∞–ª–∏ |
|----------|-----------|--------|
| **Service Locator Pattern** | `ServiceLocator.cs`, `GameBootstrapper.cs` | –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤:<br>- `ServiceLocator.Register<IResourceManager>(resourceManager)`<br>- `ServiceLocator.Get<IResourceManager>()`<br><br>–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ GameBootstrapper –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ |
| **Building Registry** | `BuildingRegistry.cs` | –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä –∑–¥–∞–Ω–∏–π:<br>- `GetAllWarehouses()` ‚Üí HashSet<Warehouse><br>- `GetAllInputs()` ‚Üí HashSet<BuildingInputInventory><br>- `GetAllOutputs()` ‚Üí HashSet<BuildingOutputInventory><br><br>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–∏—Å–∫–∞ –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö —É–∑–ª–æ–≤ |
| **Event System** | `EventManager.cs`, `EventAffected.cs` | –°–ª—É—á–∞–π–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (–ø–∞–Ω–¥–µ–º–∏—è, –±—É–Ω—Ç):<br>- Probability –∑–∞–≤–∏—Å–∏—Ç –æ—Ç happiness<br>- Duration-based (auto-cleanup)<br>- –í–ª–∏—è–µ—Ç –Ω–∞ production efficiency<br>- Need.pandemicChanceReduction —Å–Ω–∏–∂–∞–µ—Ç —à–∞–Ω—Å—ã |
| **Time Management** | `TimeManager.cs` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–µ–º –∏–≥—Ä—ã (–ø–∞—É–∑–∞, —Å–∫–æ—Ä–æ—Å—Ç—å) |
| **Cart Agent AI** | `CartAgent.cs`, `CartMovement.cs` | State machine –¥–ª—è —Ç–µ–ª–µ–∂–µ–∫:<br>1. Idle ‚Üí LoadingOutput<br>2. DeliveringOutput ‚Üí UnloadingOutput<br>3. LoadingInput ‚Üí ReturningWithInput<br><br>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç `CartPathfinder` –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ |
| **Grid System** | `GridSystem.cs`, `GridCellData.cs` | 500x500 —Å–µ—Ç–∫–∞:<br>- Multi-layer (buildings, roads, modules, zones)<br>- O(1) lookup —á–µ—Ä–µ–∑ 2D arrays<br>- `CanBuildAt()`, `OccupyCells()`, `PickUpBuilding()` |
| **Visual Debugging** | `BuildingStatusVisualizer.cs`, `CartPathVisualizer.cs` | Real-time –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:<br>- –°—Ç–∞—Ç—É—Å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –∑–¥–∞–Ω–∏–π<br>- –ü—É—Ç–∏ —Ç–µ–ª–µ–∂–µ–∫<br>- Road coverage |

---

## üìä –ö–õ–Æ–ß–ï–í–´–ï –í–´–í–û–î–´

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

- **State Pattern** - 11 input states —Å —á–µ—Ç–∫–∏–º lifecycle (OnEnter/OnUpdate/OnExit)
- **Singleton Pattern** - –ú–µ–Ω–µ–¥–∂–µ—Ä—ã —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º
- **Service Locator** - Dependency injection –¥–ª—è —Ä–∞–∑–≤—è–∑–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **Observer Pattern** - –°–æ–±—ã—Ç–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤/–Ω–∞—Å–µ–ª–µ–Ω–∏—è –¥–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ UI
- **Strategy Pattern** - Radial vs RoadBased aura distribution

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

‚úÖ **HashSet –≤–º–µ—Å—Ç–æ List** –¥–ª—è O(1) –æ–ø–µ—Ä–∞—Ü–∏–π (ModularBuilding, BuildingRegistry)
‚úÖ **Object pooling** –¥–ª—è ghost buildings (–∏–∑–±–µ–≥–∞–µ—Ç GC –≤ runtime)
‚úÖ **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ Enum.GetValues** (–∏–∑–±–µ–≥–∞–µ—Ç –∞–ª–ª–æ–∫–∞—Ü–∏–π –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä)
‚úÖ **Lazy evaluation** –¥–ª—è road coverage (–ø–µ—Ä–µ—Å—á–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö)
‚úÖ **BFS —Å max distance limit** (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏—è –Ω–∞ –±–æ–ª—å—à–∏—Ö –∫–∞—Ä—Ç–∞—Ö)

### –ò–≥—Ä–æ–≤–∞—è —ç–∫–æ–Ω–æ–º–∏–∫–∞

üéÆ **Anno 1800-style progression** - –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π
üéÆ **Multi-tier population system** - Farmers/Craftsmen/Artisans
üéÆ **Workforce allocation** - 1 –∂–∏–ª—å–µ = 1 —Ä–∞–±–æ—Ç–Ω–∏–∫, –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
üéÆ **Ramp-up/down** - –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã (60 —Å–µ–∫—É–Ω–¥ –¥–ª—è –∑–∞–ø—É—Å–∫–∞/–æ—Å—Ç–∞–Ω–æ–≤–∫–∏)
üéÆ **Supply chain coordination** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π

### –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

üåü **Multi-Start/Multi-End BFS** - –ø–æ–∏—Å–∫ –ø—É—Ç–∏ –º–µ–∂–¥—É –ú–ù–û–ñ–ï–°–¢–í–ê–ú–ò —Ç–æ—á–µ–∫ (–Ω–µ –æ–¥–Ω–∞‚Üí–æ–¥–Ω–∞)
üåü **–£–º–Ω–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ (1:1 –∏–ª–∏ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å)
üåü **BuildOrchestrator** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –≥–æ–Ω–æ–∫ —Å–æ—Å—Ç–æ—è–Ω–∏–π —á–µ—Ä–µ–∑ —É–º–Ω—É—é –æ—Ç–º–µ–Ω—É
üåü **Road-Based Aura** - –ø–æ–∫—Ä—ã—Ç–∏–µ –ø–æ –¥–æ—Ä–æ–∂–Ω–æ–π —Å–µ—Ç–∏ –≤–º–µ—Å—Ç–æ —Ä–∞–¥–∏—É—Å–∞
üåü **State preservation on upgrade** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –ø—Ä–∏ –∞–ø–≥—Ä–µ–π–¥–µ

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –§–∞–π–ª–æ–≤

### Construction (–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ)
```
Construction/
‚îú‚îÄ‚îÄ Core/                          # –û—Å–Ω–æ–≤–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ BuildingManager.cs         (1306 lines) - –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ BuildOrchestrator.cs       (109 lines)  - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–µ–∂–∏–º–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ GridSystem.cs              (365 lines)  - 500x500 —Å–µ—Ç–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ SelectionManager.cs        (269 lines)  - –í—ã–¥–µ–ª–µ–Ω–∏–µ –∑–¥–∞–Ω–∏–π
‚îú‚îÄ‚îÄ Input/                         # State Machine
‚îÇ   ‚îú‚îÄ‚îÄ PlayerInputController.cs   (174 lines)  - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ States/                    # 11 —Å–æ—Å—Ç–æ—è–Ω–∏–π
‚îú‚îÄ‚îÄ Modular Buildings/             # –ú–æ–¥—É–ª—å–Ω—ã–µ –∑–¥–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ ModularBuilding.cs         (100 lines)  - –ì–ª–∞–≤–Ω–æ–µ –∑–¥–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ BuildingModule.cs          (16 lines)   - –ú–æ–¥—É–ª—å (–ø–æ–ª–µ)
‚îÇ   ‚îî‚îÄ‚îÄ ZonedArea.cs               (185 lines)  - –ó–æ–Ω—ã —Å–æ —Å–ª–æ—Ç–∞–º–∏
‚îî‚îÄ‚îÄ GroupOps/                      # –ì—Ä—É–ø–ø–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
    ‚îî‚îÄ‚îÄ GroupOperationHandler.cs   (492 lines)  - –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
```

### Economy (–≠–∫–æ–Ω–æ–º–∏–∫–∞)
```
Economy/
‚îú‚îÄ‚îÄ Systems/                       # –ú–µ–Ω–µ–¥–∂–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ ResourceProducer.cs        (265 lines)  - –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ
‚îÇ   ‚îú‚îÄ‚îÄ ResourceManager.cs         (167 lines)  - –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
‚îÇ   ‚îî‚îÄ‚îÄ PopulationData.cs          (164 lines)  - –ù–∞—Å–µ–ª–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ Storage/                       # –õ–æ–≥–∏—Å—Ç–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ IResourceProvider.cs       - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ IResourceReceiver.cs       - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è
‚îÇ   ‚îî‚îÄ‚îÄ ResourceCoordinator.cs     (458 lines)  - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —Ü–µ–ø–æ—á–µ–∫
‚îú‚îÄ‚îÄ Warehouse/                     # –°–∫–ª–∞–¥—ã
‚îÇ   ‚îú‚îÄ‚îÄ CartAgent.cs               (1238 lines) - AI —Ç–µ–ª–µ–∂–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ CartPathfinder.cs          (60 lines)   - –ù–∞–≤–∏–≥–∞—Ü–∏—è
‚îî‚îÄ‚îÄ Taxation/                      # –ù–∞–ª–æ–≥–∏
    ‚îú‚îÄ‚îÄ Need.cs                    (192 lines)  - –ü–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏
    ‚îî‚îÄ‚îÄ Residence.cs               (468 lines)  - –ñ–∏–ª—ã–µ –¥–æ–º–∞
```

### Roads (–î–æ—Ä–æ–≥–∏)
```
Construction/Roads/
‚îú‚îÄ‚îÄ RoadManager.cs                 (234 lines)  - –ì—Ä–∞—Ñ –¥–æ—Ä–æ–≥
‚îú‚îÄ‚îÄ LogisticsPathfinder.cs         (302 lines)  - Multi-BFS
‚îî‚îÄ‚îÄ RoadCoverageVisualizer.cs      (126 lines)  - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∫—Ä—ã—Ç–∏—è
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –°—Ç–µ–∫

**Unity Version:** 2020+
**Language:** C# (.NET/Mono)
**UI:** TextMeshPro
**Grid Size:** 500x500 cells
**Pathfinding:** BFS (Breadth-First Search)
**Comments:** Russian (–†—É—Å—Å–∫–∏–π)

---

## üìù –ò—Å—Ç–æ—Ä–∏—è –ò–∑–º–µ–Ω–µ–Ω–∏–π

### 2025-11-18 - –í–µ—Ä—Å–∏—è 1.0.0
- –ü–æ–ª–Ω—ã–π reverse-engineering –∞–Ω–∞–ª–∏–∑ –∏–≥—Ä–æ–≤—ã—Ö –º–µ—Ö–∞–Ω–∏–∫
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–∏—Å—Ç–µ–º: Construction, Logistics, Economy, Input
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π
- 90+ C# —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ

---

**–°–æ–∑–¥–∞–Ω–æ:** AI Assistant (Claude)
**–î–ª—è –ø—Ä–æ–µ–∫—Ç–∞:** –¢–æ—Ä–≥–æ–≤—ã–π –ü—É—Ç—å - Unity City-Building Game
**–õ–∏—Ü–µ–Ω–∑–∏—è:** –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
